<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yuujin Player</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-i18n@8.24.4/dist/vue-i18n.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsmediatags/3.9.5/jsmediatags.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/midi.js/2.0.0/midi.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.3/nouislider.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.3/nouislider.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="flowing-album.css">
    <link rel="stylesheet" href="main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&family=Noto+Sans+KR:wght@100..900&family=Noto+Sans+SC:wght@100..900&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'apple-bg': {
                            light: '#f5f5f7',
                            dark: '#1c1c1e'
                        },
                        'apple-text': {
                            light: '#1d1d1f',
                            dark: '#f5f5f7'
                        },
                        'apple-secondary': {
                            light: '#86868b',
                            dark: '#a1a1a6'
                        },
                        'apple-highlight': {
                            light: '#0071e3',
                            dark: '#0a84ff'
                        },
                        'apple-card-bg': {
                            light: 'rgba(255, 255, 255, 0.7)',
                            dark: 'rgba(44, 44, 46, 0.7)'
                        },
                    },
                    fontFamily: {
                        sans: ['Segoe UI Variable Display','Segoe UI Bold','SF Pro Display Semibold','Genryu Sans CJK','MeiraKakuGo','SDK_SC_Web','Segoe UI Semibold','Microsoft Yahei UI','Hiragino Sans GB','Inter', 'SF Pro Display Semibold', 'PingFang SC', 'system-ui', 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', 'sans-serif' , 'SF Compact' , 'PingFang SC'],
                        bashontaitoru:['Segoe UI Variable Display Bold','Segoe UI Semibold','SF Pro Display Semibold','Inter Bold','Roboto Bold','Noto Sans JP Heavy','Noto Sans KR Heavy','Noto Sans TC Heavy','Noto Sans SC Heavy'] 
                    },
                },
            },
        }
    </script>
    <style>
        .glassmorphism {
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        [x-cloak] { display: none !important; }

        .custom-scrollbar {
            scrollbar-width: thin;
            scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: var(--scrollbar-track);
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: var(--scrollbar-thumb);
            border-radius: 3px;
        }

        .lyrics-fade-enter-active, .lyrics-fade-leave-active {
            transition: all 0.5s ease;
        }

        .lyrics-fade-enter, .lyrics-fade-leave-to {
            opacity: 0;
            transform: translateY(20px);
        }

        .lyrics-fade-move {
            transition: transform 0.5s;
        }

        :root {
            --scrollbar-thumb: rgba(0, 0, 0, 0.2);
            --scrollbar-track: transparent;
            --text-color: black;
        }

        .dark {
            --scrollbar-thumb: rgba(255, 255, 255, 0.2);
            --scrollbar-track: rgba(255, 255, 255, 0.1);
            --text-color: white;
        }

        .lyrics-container {
            position: relative;
            overflow: hidden;
            height: 100%;
        }

        .lyrics-content {
            position: absolute;
            width: 100%;
            transition: transform 0.4s;
        }

        .lyric-line {
            padding: 1px 0;
        }
        
        @font-face {
        font-family: "MeiraKakuGo";
        src:
        url("MeiraKakuGo.woff2") format("woff2"),
        }


        .glassmorphism {
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }

        .dark .glassmorphism {
            border-color: rgba(255, 255, 255, 0.1);
        }

        #backgroundOverlay {
            transition: background-color 0.3s ease;
        }

        .harmony {
            font-style: italic;
            opacity: 0.8;
            font-size: 0.9em;
        }

        .lyric-line.text-left p {
            padding-left: 10%;
        }

        .lyric-line.text-right p {
            padding-right: 10%;
        }

        .lyric-line p {
            max-width: 80%;
            text-align: center;
        }

        .lyric-line.text-left p {
            margin-right: auto;
            text-align: left;
            padding-left: 3%;
        }

        .lyric-line.text-right p {
            margin-left: auto;
            text-align: right;
            padding-right: 3%;
        }

        /* New styles for the minimalist layout */
        .player-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: transparent;
            color: var(--text-color, black);
            padding: 2rem;
        }

        .player-header {
            margin-bottom: 2rem;
        }

        .track-title {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .track-artist {
            font-size: 1.2rem;
            opacity: 0.7;
        }

        .player-main {
            display: flex;
            flex: 1;
            justify-content: flex-end;
            align-items: center;
            position: relative;
        }

        .circular-display {
            width: 400px;
            height: 400px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        [lang="ko_KP"],
:lang(ko_KP) {
  font-family: 'Malgun Gothic', sans-serif;
}

        .player-container .md:hidden .flex-1 {
            padding-top: 2rem;
        }

        .player-container .hidden.md:block .player-main {
            padding-top: 2rem;
        }

        /* Artist Info Modal Styles */
        .artist-info-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .artist-info-content {
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            width: 80%;
            max-width: 1580px;
            max-height: 80%;
            overflow-y: auto;
        }

        .artist-info-close {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .artist-info-iframe {
            width: 100%;
            height: 500px;
            border: none;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none; /* Initially hidden */
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            width: 80%;
            max-width: 600px;
            text-align: center;
            position: relative;
        }
        .modal-close {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.5rem;
            cursor: pointer;
        }
        @keyframes marquee {
        0% {
            transform: translateX(0);
        }
        100% {
            transform: translateX(-100%);
        }
    }


    /* New styles for MicaAlt effect */
    body {
        background-color: transparent !important;
    }

    #app {
        background-color: transparent !important;
    }

    .bg-apple-bg-light, .bg-apple-bg-dark {
        background-color: rgba(255, 255, 255, 0.7) !important;
    }

    .dark .bg-apple-bg-light, .dark .bg-apple-bg-dark {
        background-color: rgba(0, 0, 0, 0.7) !important;
    }

    .glassmorphism {
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        background-color: rgba(255, 255, 255, 0.5);
    }

    .dark .glassmorphism {
        background-color: rgba(0, 0, 0, 0.5);
    }

    footer {
        background-color: transparent !important;
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
    }

    .footer-content {
        background-color: rgba(255, 255, 255, 0.5);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
    }

    .dark .footer-content {
        background-color: rgba(0, 0, 0, 0.5);
    }
    </style>
</head>
<body class="bg-apple-bg-light dark:bg-apple-bg-dark text-apple-text-light dark:text-apple-text-dark">
    <div class="flowing-album-container">
        <div id="flowingAlbum1" class="flowing-album"></div>
        <div id="flowingAlbum2" class="flowing-album"></div>
    </div>
    <div id="backgroundOverlay" class="fixed top-0 left-0 w-full h-full -z-10"></div>
    <div id="app" class="h-screen flex flex-col">
        <!-- Main content -->
        <main class="flex-1 overflow-y-auto p-8">
            <!-- Library View -->
            <div v-if="currentView === 'library'" class="px-8 py-6">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-3xl font-medium tracking-tight text-apple-text-light dark:text-apple-text-dark">{{ $t('library') }}</h2>
                    <div class="flex items-center space-x-3">
                        <label class="inline-flex items-center px-4 py-2 rounded-full bg-apple-button-light dark:bg-apple-button-dark hover:bg-apple-button-hover-light dark:hover:bg-apple-button-hover-dark transition-all duration-200 cursor-pointer text-sm font-medium">
                            <svg class="w-4 h-4 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 4v16m8-8H4" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>{{ $t('addTrack') }}</span>
                            <input type="file" @change="handleFileSelect" accept="audio/*" class="hidden">
                        </label>
                        <label class="inline-flex items-center px-4 py-2 rounded-full bg-apple-button-light dark:bg-apple-button-dark hover:bg-apple-button-hover-light dark:hover:bg-apple-button-hover-dark transition-all duration-200 cursor-pointer text-sm font-medium">
                            <svg class="w-4 h-4 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>{{ $t('addFolder') }}</span>
                            <input type="file" @change="handleFolderSelect" webkitdirectory directory multiple class="hidden">
                        </label>
                        <button @click="toggleLibraryLayout" class="p-2 rounded-full bg-apple-button-light dark:bg-apple-button-dark hover:bg-apple-button-hover-light dark:hover:bg-apple-button-hover-dark transition-all duration-200">
                            <i :data-feather="libraryLayout === 'grid' ? 'list' : 'grid'" class="w-5 h-5"></i>
                        </button>
                    </div>
                </div>

                <!-- Grid Layout -->
                <div v-if="libraryLayout === 'grid'" 
                    class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-6">
                    <div v-for="(track, index) in playlist" 
                        :key="track.id" 
                        class="group relative bg-apple-card-light dark:bg-apple-card-dark rounded-xl overflow-hidden cursor-pointer transition-all duration-300"
                        @click="playTrack(index)">
                    <div class="aspect-square overflow-hidden">
                        <img :src="track.coverArt" 
                                :alt="track.title" 
                                class="w-full h-full object-cover transform transition-transform duration-300 group-hover:scale-105">
                    </div>
                    <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <div class="absolute bottom-0 left-0 right-0 p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex-1 overflow-hidden">
                                    <h3 class="font-medium text-white whitespace-nowrap overflow-hidden">
                                        <span class="inline-block animate-marquee">{{ track.title }}</span>
                                    </h3>
                                    <p class="text-sm text-white/80 truncate">{{ track.artist }}</p>
                                </div>
                                <button class="w-10 h-10 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center text-white hover:bg-white/20 transition-colors">
                                    <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M5 3l14 9-14 9V3z" fill="currentColor"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>

                <!-- List Layout -->
                <div v-else class="bg-apple-card-light dark:bg-apple-card-dark rounded-xl overflow-hidden">
                    <div v-for="(track, index) in playlist" 
                        :key="track.id"
                        class="group flex items-center p-4 hover:bg-apple-highlight-light/5 dark:hover:bg-apple-highlight-dark/5 transition-colors border-b border-apple-border-light dark:border-apple-border-dark last:border-0"
                        @click="playTrack(index)">
                    <div class="relative w-14 h-14 rounded-lg overflow-hidden">
                        <img :src="track.coverArt" 
                                :alt="track.title" 
                                class="w-full h-full object-cover">
                        <div class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 3l14 9-14 9V3z" fill="currentColor"/>
                            </svg>
                        </div>
                    </div>
                    <div class="ml-4 flex-1 min-w-0 overflow-hidden">
                        <h3 class="font-medium text-apple-text-light dark:text-apple-text-dark whitespace-nowrap overflow-hidden">
                            <span class="inline-block animate-marquee">{{ track.title }}</span>
                        </h3>
                        <p class="text-sm text-apple-secondary-light dark:text-apple-secondary-dark truncate">{{ track.artist }}</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-sm text-apple-secondary-light dark:text-apple-secondary-dark">
                            {{ track.duration || '--:--' }}
                        </span>
                        <button class="p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-apple-highlight-light/10 dark:hover:bg-apple-highlight-dark/10">
                            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/>
                            </svg>
                        </button>
                    </div>
                    </div>
                </div>
            </div>

            <!-- Now Playing View -->
            <div v-if="currentView === 'nowPlaying'" class="player-container">
                <!-- Mobile Layout -->
                <div class="md:hidden h-screen text-gray-900 dark:text-white p-6 flex flex-col bg-transparent">
                    <!-- Title Section -->
                    <div class="flex-none">
                        <h1 class="text-4xl font-bold mb-1">{{ currentTrack.title }}</h1>
                        <p class="text-lg text-gray-500 dark:text-gray-400 cursor-pointer" @click="showArtistInfo">{{ currentTrack.artist }}</p>
                    </div>

                    <!-- Visualization Section -->
                    <div class="flex-1 flex items-center justify-end">
                        <div class="relative w-[300px] h-[300px]">
                            <div class="absolute inset-0 rounded-full border-2 border-gray-300 dark:border-gray-600">
                                <canvas id="rippleCanvas" class="absolute inset-0 w-full h-full mix-blend-color-burn"></canvas>
                                <img :src="currentTrack.coverArt" :alt="currentTrack.title" 
                                    class="w-full h-full object-cover rounded-full opacity-90">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Desktop Layout -->
                <div class="hidden md:block">
                    <div class="player-header">
                        <h1 class="track-title font-bashontaitoru" >{{ currentTrack.title }}</h1>
                        <p class="track-artist cursor-pointer" @click="showArtistInfo">{{ currentTrack.artist }}</p>
                    </div>
                    
                    <div class="player-main">
                        <div class="circular-display">
                            <canvas id="rippleCanvas" class="absolute inset-0 w-full h-full mix-blend-color-burn"></canvas>
                            <img :src="currentTrack.coverArt" :alt="currentTrack.title" 
                                class="w-full h-full object-cover rounded-full">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Lyrics View -->
            <div v-if="currentView === 'lyrics'" class="h-full flex relative">
                <!-- Main content area - Now takes full width -->
                <div class="flex-1 flex flex-col">
                    <!-- Top bar with play/pause control -->
                    <div class="h-0 bg-white dark:bg-black/0 border-b border-gray-300 dark:border-gray-800 flex items-center justify-end px-4">
                    </div>

                    <!-- Lyrics content -->
                    <div ref="lyricsContainer" class="flex-1 overflow-hidden relative">
                        <div class="lyrics-content absolute w-full transition-transform duration-500 ease-out p-4"
                            :style="{ transform: `translateY(${lyricsTranslateY}px)` }">
                            <div 
                                v-for="(line, index) in displayedLyrics" 
                                :key="index"
                                :ref="'lyricLine_' + index"
                                class="lyric-line mb-6 transition-all duration-300 ease-out"
                                :class="{
                                    'text-3xl font-bold': index === activeLyricIndex,
                                    'text-xl text-apple-secondary-light dark:text-apple-secondary-dark': index !== activeLyricIndex,
                                    'text-right': line.isRightAligned,
                                    'text-left': !line.isRightAligned
                                }"
                            >
                                <p>
                                    <span v-for="(part, partIndex) in line.parts" :key="partIndex"
                                        :class="{'harmony': part.isHarmony}">
                                        {{ part.text }}
                                    </span>
                                </p>
                                <p v-if="line.translation" 
                                class="mt-1 text-lg text-apple-secondary-light dark:text-apple-secondary-dark"
                                :class="{ 'font-semibold': index === activeLyricIndex }">
                                    {{ line.translation }}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <input type="file" ref="lyricsInput" @change="handleLyricsImport" accept=".lrc,.txt" class="hidden">
                <input type="file" ref="translationInput" @change="handleTranslationImport" accept=".lrc,.txt" class="hidden">
            </div>

           <!-- Settings View -->
<div v-if="currentView === 'settings'" class="min-h-screen bg-transparent">
    <div class="max-w-3xl mx-auto p-6 md:p-8">
        <!-- Header -->
        <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8 border-b border-gray-200 dark:border-gray-700 pb-6">
            <h1 class="text-4xl font-semibold text-apple-text-light dark:text-apple-text-dark">{{ $t('settings') }}</h1>
            <div class="flex flex-wrap items-center gap-3">
                <button @click="exportData" class="px-4 py-2 text-sm bg-apple-highlight-light dark:bg-apple-highlight-dark text-white hover:opacity-90 transition flex items-center gap-2">
                    <i data-feather="download" class="w-4 h-4"></i>
                    {{ $t('exportData') }}
                </button>
                <button @click="importData" class="px-4 py-2 text-sm border border-apple-highlight-light dark:border-apple-highlight-dark text-apple-highlight-light dark:text-apple-highlight-dark hover:bg-apple-highlight-light/10 dark:hover:bg-apple-highlight-dark/10 transition flex items-center gap-2">
                    <i data-feather="upload" class="w-4 h-4"></i>
                    {{ $t('importData') }}
                </button>
            </div>
        </div>
        
        <!-- Settings Sections -->
        <div class="space-y-6">
            <!-- General Settings -->
            <section class="bg-white/70 dark:bg-gray-800/70 backdrop-blur-lg p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-semibold text-apple-text-light dark:text-apple-text-dark flex items-center gap-2">
                        <i data-feather="settings" class="w-5 h-5"></i>
                        {{ $t('generalSettings') }}
                    </h2>
                </div>
                
                <div class="space-y-6">
                    <!-- Language Selector -->
                    <div class="sm:flex sm:items-center sm:justify-between sm:gap-4">
                        <label class="block text-sm font-medium mb-2 sm:mb-0 text-apple-text-light dark:text-apple-text-dark sm:w-1/3">
                            {{ $t('language') }}
                        </label>
                        <div class="relative sm:w-2/3">
                            <select v-model="$i18n.locale" 
                                    class="w-full p-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-apple-text-light dark:text-apple-text-dark appearance-none hover:border-apple-highlight-light dark:hover:border-apple-highlight-dark transition-colors pr-10">
                                <option value="en">English (United States)</option>
                                <option value="zh">中文（中华人民共和国）</option>
                                <option value="zh_TW">繁體中文（中國台灣）</option>
                                <option value="ja">日本語（日本）</option>
                                <option value="jakanjionly">日本語（偽中国語）</option>
                                <option value="ko_KP">조선어(조선민주주의인민공화국)</option>
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none">
                                <i data-feather="chevron-down" class="w-4 h-4 text-gray-500 dark:text-gray-400"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Theme Toggle -->
                    <div class="sm:flex sm:items-center sm:justify-between sm:gap-4 pt-4 border-t border-gray-100 dark:border-gray-700">
                        <label class="block text-sm font-medium mb-2 sm:mb-0 text-apple-text-light dark:text-apple-text-dark sm:w-1/3">
                            {{ $t('theme') }}
                        </label>
                        <div class="sm:w-2/3">
                            <button @click="toggleDarkMode" 
                                    class="w-full p-3 border border-gray-200 dark:border-gray-600 hover:border-apple-highlight-light dark:hover:border-apple-highlight-dark transition-colors flex items-center justify-between">
                                <span class="text-apple-text-light dark:text-apple-text-dark flex items-center gap-2">
                                    <i data-feather="moon" v-if="!isDarkMode" class="w-4 h-4"></i>
                                    <i data-feather="sun" v-else class="w-4 h-4"></i>
                                    {{ isDarkMode ? $t('lightMode') : $t('darkMode') }}
                                </span>
                                <div class="w-10 h-5 bg-gray-200 dark:bg-gray-700 relative">
                                    <div class="absolute w-4 h-4 bg-apple-highlight-light dark:bg-apple-highlight-dark top-0.5" 
                                        :class="isDarkMode ? 'right-0.5' : 'left-0.5'"></div>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Audio Settings -->
            <section class="bg-white/70 dark:bg-gray-800/70 backdrop-blur-lg p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-semibold text-apple-text-light dark:text-apple-text-dark flex items-center gap-2">
                        <i data-feather="volume-2" class="w-5 h-5"></i>
                        {{ $t('audioSettings') }}
                    </h2>
                </div>
                
                <div class="space-y-6">
                    <div class="sm:flex sm:items-center sm:justify-between sm:gap-4">
                        <div class="flex items-center justify-between mb-2 sm:mb-0 sm:w-1/3">
                            <label class="text-sm font-medium text-apple-text-light dark:text-apple-text-dark">
                                {{ $t('volume') }}
                            </label>
                        </div>
                        <div class="sm:w-2/3">
                            <div class="flex items-center gap-3">
                                <i data-feather="volume-1" class="w-4 h-4 text-gray-500 dark:text-gray-400"></i>
                                <div class="flex-1 relative">
                                    <input type="range" v-model="volume" min="0" max="100" 
                                        class="w-full h-2 appearance-none bg-gray-200 dark:bg-gray-600 accent-apple-highlight-light dark:accent-apple-highlight-dark">
                                </div>
                                <i data-feather="volume-2" class="w-4 h-4 text-gray-500 dark:text-gray-400"></i>
                                <span class="text-xs text-gray-500 dark:text-gray-400 w-8 text-right">{{ volume }}%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Performance Settings -->
            <section class="bg-white/70 dark:bg-gray-800/70 backdrop-blur-lg p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-semibold text-apple-text-light dark:text-apple-text-dark flex items-center gap-2">
                        <i data-feather="cpu" class="w-5 h-5"></i>
                        {{ $t('performanceSettings') }}
                    </h2>
                </div>
                
                <div class="space-y-6">
                    <div class="sm:flex sm:items-center sm:justify-between sm:gap-4">
                        <label class="block text-sm font-medium mb-2 sm:mb-0 text-apple-text-light dark:text-apple-text-dark sm:w-1/3">
                            {{ $t('performanceMode') }}
                        </label>
                        <div class="sm:w-2/3">
                            <button @click="togglePerformanceMode" 
                                    class="w-full p-3 bg-apple-highlight-light dark:bg-apple-highlight-dark text-white hover:opacity-90 transition-opacity flex items-center justify-between">
                                <span class="flex items-center gap-2">
                                    <i data-feather="zap" class="w-4 h-4"></i>
                                    {{ !performanceMode ? $t('enablePerformanceMode') : 
                                    (performanceMode && !extremePerformanceMode) ? $t('enableExtremePerformanceMode') : 
                                    $t('disablePerformanceMode') }}
                                </span>
                                <div v-if="performanceMode" class="flex">
                                    <div class="w-2 h-2 bg-white animate-pulse mr-1"></div>
                                    <div v-if="extremePerformanceMode" class="w-2 h-2 bg-white animate-pulse mr-1"></div>
                                </div>
                            </button>
                        </div>
                    </div>

                    <div class="sm:flex sm:items-center sm:justify-between sm:gap-4 pt-4 border-t border-gray-100 dark:border-gray-700">
                        <label class="block text-sm font-medium mb-2 sm:mb-0 text-apple-text-light dark:text-apple-text-dark sm:w-1/3 flex items-center gap-2">
                            <i data-feather="layers" class="w-4 h-4"></i>
                            {{ $t('enableBackgroundEffects') }}
                        </label>
                        <div class="sm:w-2/3 flex justify-end">
                            <div class="relative inline-block w-12 h-6 bg-gray-200 dark:bg-gray-700 cursor-pointer" @click="backgroundEffects = !backgroundEffects">
                                <div class="absolute w-5 h-5 bg-apple-highlight-light dark:bg-apple-highlight-dark top-0.5 transition-all duration-200"
                                    :class="backgroundEffects ? 'right-0.5' : 'left-0.5'"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Data Management -->
            <section class="bg-white/70 dark:bg-gray-800/70 backdrop-blur-lg p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-semibold text-apple-text-light dark:text-apple-text-dark flex items-center gap-2">
                        <i data-feather="database" class="w-5 h-5"></i>
                        {{ $t('dataManagement') }}
                    </h2>
                </div>
                
                <div class="space-y-4">
                    <button @click="clearData" 
                            class="w-full p-3 bg-red-500 hover:bg-red-600 text-white transition-colors flex items-center justify-between">
                        <span class="flex items-center gap-2">
                            <i data-feather="trash-2" class="w-4 h-4"></i>
                            {{ $t('clearAllData') }}
                        </span>
                        <i data-feather="alert-triangle" class="w-4 h-4"></i>
                    </button>
                </div>
            </section>
        </div>
    </div>
</div>

        </main>

        <!-- Footer -->
<footer class="bg-transparent text-black dark:text-white">
    <div class="footer-content">
        <!-- Top Navigation -->
        <div class="h-12 flex items-center justify-between px-4 sm:px-6 border-b border-gray-300 dark:border-gray-800">
            <div class="flex items-center space-x-4 sm:space-x-8">
                <button @click="currentView = 'library'" class="flex items-center space-x-2 text-sm hover:text-apple-highlight-dark dark:hover:text-apple-highlight-light transition-all duration-200 hover:scale-105">
                    <i data-feather="music" class="w-5 h-5 transition-transform duration-200 hover:rotate-12"></i>
                    <span class="hidden sm:inline">{{ $t('library') }}</span>
                </button>
                <button @click="currentView = 'nowPlaying'" class="flex items-center space-x-2 text-sm hover:text-apple-highlight-dark dark:hover:text-apple-highlight-light transition-all duration-200 hover:scale-105">
                    <i data-feather="list" class="w-5 h-5 transition-transform duration-200 hover:-translate-y-0.5"></i>
                    <span class="hidden sm:inline">{{ $t('nowPlaying') }}</span>
                </button>
                <button @click="currentView = 'lyrics'" class="flex items-center space-x-2 text-sm hover:text-apple-highlight-dark dark:hover:text-apple-highlight-light transition-all duration-200 hover:scale-105">
                    <i data-feather="file-text" class="w-5 h-5 transition-transform duration-200 hover:translate-y-0.5"></i>
                    <span class="hidden sm:inline">{{ $t('lyrics') }}</span>
                </button>
                <button @click="currentView = 'settings'" class="flex items-center space-x-2 text-sm hover:text-apple-highlight-dark dark:hover:text-apple-highlight-light transition-all duration-200 hover:scale-105">
                    <i data-feather="settings" class="w-5 h-5 transition-transform duration-200 hover:rotate-45"></i>
                    <span class="hidden sm:inline">{{ $t('settings') }}</span>
                </button>
                
                <!-- Separator line - Only visible in lyrics view -->
                <div v-if="currentView === 'lyrics'" class="h-5 border-l border-gray-300 dark:border-gray-700 mx-1"></div>
                
                <!-- Import buttons - Only visible in lyrics view -->
                <button v-if="currentView === 'lyrics'" @click="importLyrics" class="flex items-center space-x-2 text-sm hover:text-apple-highlight-dark dark:hover:text-apple-highlight-light transition-all duration-200 hover:scale-105">
                    <i data-feather="upload" class="w-5 h-5 transition-transform duration-200 hover:-translate-y-1"></i>
                    <span class="hidden sm:inline">{{ $t('importLyrics') }}</span>
                </button>
                <button v-if="currentView === 'lyrics'" @click="importTranslation" class="flex items-center space-x-2 text-sm hover:text-apple-highlight-dark dark:hover:text-apple-highlight-light transition-all duration-200 hover:scale-105">
                    <i data-feather="globe" class="w-5 h-5 transition-transform duration-200 hover:rotate-12"></i>
                    <span class="hidden sm:inline">{{ $t('importTranslation') }}</span>
                </button>
            </div>
            <div class="text-sm text-gray-600 dark:text-gray-400 cursor-pointer hover:text-black dark:hover:text-white transition-colors duration-200" @click="openModal">
                <i data-feather="info" class="w-5 h-5 sm:hidden"></i>
                <span class="hidden sm:inline">RELVue213.0.0-C20250430-0501(Codename:RikuhachimaAru/陸八魔亜瑠)</span>
            </div>
        </div>
        
        <!-- Bottom Playback Controls -->
        <div class="h-16 flex items-center justify-between sm:justify-start space-x-4 px-4 sm:px-6">
            <div class="flex items-center space-x-3">
                <img :src="currentTrack.coverArt" :alt="currentTrack.title" class="w-10 h-10 rounded-full transition-transform duration-200 hover:scale-105">
                <div class="flex flex-col">
                    <span class="text-sm font-medium">{{ currentTrack.title }}</span>
                    <span class="text-xs text-gray-600 dark:text-gray-400 cursor-pointer hover:text-black dark:hover:text-white transition-colors duration-200" @click="showArtistInfo">{{ currentTrack.artist }}</span>
                </div>
            </div>
            
            <div class="hidden sm:flex flex-1 items-center">
                <span 
                    class="text-sm text-gray-600 dark:text-gray-400 mr-4"
                    style="animation: progress-bounce 2s cubic-bezier(0.25, 0.1, 0.25, 1) infinite;"
                >{{ formatTime(currentTime) }}/{{ formatTime(duration) }}</span>
                <div class="flex-1 h-1 bg-gray-300 dark:bg-gray-700 rounded-full group">
                    <div class="h-full bg-apple-highlight-dark rounded-full transition-all duration-300 ease-in-out group-hover:h-2" 
                         :style="{ width: `${progress}%` }"></div>
                </div>
            </div>
            
            <div class="flex items-center space-x-4">
                <button @click="playPrevious" class="text-gray-600 hover:text-black dark:text-gray-400 dark:hover:text-white transition-all duration-200 hover:scale-110">
                    <i data-feather="skip-back" class="w-5 h-5"></i>
                </button>
                <button @click="togglePlay" class="w-8 h-8 flex items-center justify-center text-black dark:text-white transition-all duration-200 hover:scale-110">
                    <i v-if="isPlaying" data-feather="pause" class="w-5 h-5"></i>
                    <i v-else data-feather="play" class="w-5 h-5"></i>
                </button>
                <button @click="playNext" class="text-gray-600 hover:text-black dark:text-gray-400 dark:hover:text-white transition-all duration-200 hover:scale-110">
                    <i data-feather="skip-forward" class="w-5 h-5"></i>
                </button>
            </div>
        </div>
    </div>
</footer>

        <!-- Artist Info Modal -->
        <div v-if="showArtistInfoModal" class="artist-info-modal">
            <div class="artist-info-content">
                <button @click="closeArtistInfo" class="artist-info-close">&times;</button>
                <iframe :src="artistInfoUrl" class="artist-info-iframe"></iframe>
            </div>
        </div>

        <div id="infoModal" class="fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm flex items-center justify-center z-50" v-show="showModal">
            <div class="bg-white dark:bg-gray-900 w-full max-w-4xl shadow-2xl flex overflow-hidden">
                <!-- Left side with player info -->
                <div class="p-8 w-1/3 flex flex-col border-r border-gray-200 dark:border-gray-700">
                    <div class="flex items-center mb-6">
                        <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" />
                            </svg>
                        </div>
                    </div>
        
                    <h2 class="text-2xl font-extrabold font-bashontaitoru dark:text-white mb-1">ユウジン プレイヤー</h2>
                    <p class="text-lg font-semibold dark:text-gray-300 mb-6">{{ $t('playerNameEn') }}</p>
        
                    <div class="border-t border-gray-200 dark:border-gray-700 my-3"></div>
        
                    <p class="text-sm text-gray-500 dark:text-gray-400 mb-auto">{{ $t('version', { version: 'Windows RELVue213.0.0-C20250430-0501(Codename:RikuhachimaAru/陸八魔亜瑠)' }) }}</p>
        
                    <p class="text-gray-500 dark:text-gray-400 text-sm mt-8">© Seirai Haraguchi,2025</p>
                </div>
        
                <!-- Right side with character image -->
                <div class="w-2/3 relative">
                    <button @click="closeModal" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors duration-200 z-10">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
        
                    <div class="h-full w-full bg-gradient-to-br from-amber-100 to-amber-200 dark:from-amber-800 dark:to-amber-900 relative">
                        <img src="https://images2.alphacoders.com/130/thumb-1920-1300795.jpg" alt="Rikuhachima Aru" class="w-full h-full object-cover">
                        <div class="absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/50 to-transparent text-white">
                            <div class="flex justify-between items-end">
                                <p class="text-xl font-bold">Rikuhachima Aru</p>
                                <p class="text-sm font-light opacity-80">https://wall.alphacoders.com/big.php?i=1300795</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="app2.js"></script>
    <script src="nowplayinglyrics.js"></script>
    <script src="app-translations.js"></script>
    <script src="app-library.js"></script>
</body>
</html>
